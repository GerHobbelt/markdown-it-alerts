{"version":3,"file":"markdownItAlerts.umd.js","sources":["../index.js"],"sourcesContent":["\nlet container = require('@gerhobbelt/markdown-it-container');\n\nmodule.exports = function alerts_plugin(md, options) {\n  let containerOpenCount = 0;\n  let links = 'links' in (options || {}) ? options.links : true;\n  let icons = 'icons' in (options || {}) ? options.icons : false;\n\n  function icon(name) {\n    switch (name) {\n    case 'warning':\n      return 'glyphicon glyphicon-alert';\n    case 'danger':\n      return 'glyphicon glyphicon-remove-sign';\n    default:\n      return 'glyphicon glyphicon-info-sign';\n    }\n  }\n\n  function setupContainer(name) {\n    md.use(container, name, {\n      render: function (tokens, idx) {\n        let html;\n        if (tokens[idx].nesting === 1) {\n          containerOpenCount += 1;\n          html = '<div class=\"alert alert-' + name + '\" role=\"alert\">\\n';\n          if (icons) {\n            html += '<div class=\"alert-inner\">\\n';\n            html += '<div class=\"alert-icon\"><span class=\"' + icon(name) +\n              '\" aria-hidden=\"true\"></span></div>\\n';\n            html += '<div class=\"alert-message\">';\n          }\n          return html;\n        }\n        containerOpenCount -= 1;\n        html = '</div>\\n';\n        if (icons) {\n          html += '</div>\\n</div>\\n';\n        }\n        return html;\n      }\n    });\n  }\n\n  function isContainerOpen() {\n    return containerOpenCount > 0;\n  }\n\n  function selfRender(tokens, idx, options, env, self) {\n    return self.renderToken(tokens, idx, options);\n  }\n\n  function setupLinks() {\n    let defaultRender = md.renderer.rules.link_open || selfRender;\n\n    md.renderer.rules.link_open = function (tokens, idx, options, env, self) {\n      if (isContainerOpen()) {\n        tokens[idx].attrPush([ 'class', 'alert-link' ]);\n      }\n\n      return defaultRender(tokens, idx, options, env, self);\n    };\n  }\n\n  function init() {\n    setupContainer('success');\n    setupContainer('info');\n    setupContainer('warning');\n    setupContainer('danger');\n\n    if (links) {\n      setupLinks();\n    }\n  }\n\n  init();\n};\n"],"names":["container","require","module","exports","alerts_plugin","md","options","containerOpenCount","links","icons","icon","name","setupContainer","use","render","tokens","idx","html","nesting","isContainerOpen","selfRender","env","self","renderToken","setupLinks","defaultRender","renderer","rules","link_open","attrPush","init"],"mappings":";;;;;EACA,IAAIA,SAAS,GAAGC,OAAO,CAAC,mCAAD,CAAvB;;EAEAC,MAAM,CAACC,OAAP,GAAiB,SAASC,aAAT,CAAuBC,EAAvB,EAA2BC,OAA3B,EAAoC;EACnD,MAAIC,kBAAkB,GAAG,CAAzB;EACA,MAAIC,KAAK,GAAG,YAAYF,OAAO,IAAI,EAAvB,IAA6BA,OAAO,CAACE,KAArC,GAA6C,IAAzD;EACA,MAAIC,KAAK,GAAG,YAAYH,OAAO,IAAI,EAAvB,IAA6BA,OAAO,CAACG,KAArC,GAA6C,KAAzD;;EAEA,WAASC,IAAT,CAAcC,IAAd,EAAoB;EAClB,YAAQA,IAAR;EACA,WAAK,SAAL;EACE,eAAO,2BAAP;;EACF,WAAK,QAAL;EACE,eAAO,iCAAP;;EACF;EACE,eAAO,+BAAP;EANF;EAQD;;EAED,WAASC,cAAT,CAAwBD,IAAxB,EAA8B;EAC5BN,IAAAA,EAAE,CAACQ,GAAH,CAAOb,SAAP,EAAkBW,IAAlB,EAAwB;EACtBG,MAAAA,MAAM,EAAE,UAAUC,MAAV,EAAkBC,GAAlB,EAAuB;EAC7B,YAAIC,IAAJ;;EACA,YAAIF,MAAM,CAACC,GAAD,CAAN,CAAYE,OAAZ,KAAwB,CAA5B,EAA+B;EAC7BX,UAAAA,kBAAkB,IAAI,CAAtB;EACAU,UAAAA,IAAI,GAAG,6BAA6BN,IAA7B,GAAoC,mBAA3C;;EACA,cAAIF,KAAJ,EAAW;EACTQ,YAAAA,IAAI,IAAI,6BAAR;EACAA,YAAAA,IAAI,IAAI,0CAA0CP,IAAI,CAACC,IAAD,CAA9C,GACN,sCADF;EAEAM,YAAAA,IAAI,IAAI,6BAAR;EACD;;EACD,iBAAOA,IAAP;EACD;;EACDV,QAAAA,kBAAkB,IAAI,CAAtB;EACAU,QAAAA,IAAI,GAAG,UAAP;;EACA,YAAIR,KAAJ,EAAW;EACTQ,UAAAA,IAAI,IAAI,kBAAR;EACD;;EACD,eAAOA,IAAP;EACD;EApBqB,KAAxB;EAsBD;;EAED,WAASE,eAAT,GAA2B;EACzB,WAAOZ,kBAAkB,GAAG,CAA5B;EACD;;EAED,WAASa,UAAT,CAAoBL,MAApB,EAA4BC,GAA5B,EAAiCV,OAAjC,EAA0Ce,GAA1C,EAA+CC,IAA/C,EAAqD;EACnD,WAAOA,IAAI,CAACC,WAAL,CAAiBR,MAAjB,EAAyBC,GAAzB,EAA8BV,OAA9B,CAAP;EACD;;EAED,WAASkB,UAAT,GAAsB;EACpB,QAAIC,aAAa,GAAGpB,EAAE,CAACqB,QAAH,CAAYC,KAAZ,CAAkBC,SAAlB,IAA+BR,UAAnD;;EAEAf,IAAAA,EAAE,CAACqB,QAAH,CAAYC,KAAZ,CAAkBC,SAAlB,GAA8B,UAAUb,MAAV,EAAkBC,GAAlB,EAAuBV,OAAvB,EAAgCe,GAAhC,EAAqCC,IAArC,EAA2C;EACvE,UAAIH,eAAe,EAAnB,EAAuB;EACrBJ,QAAAA,MAAM,CAACC,GAAD,CAAN,CAAYa,QAAZ,CAAqB,CAAE,OAAF,EAAW,YAAX,CAArB;EACD;;EAED,aAAOJ,aAAa,CAACV,MAAD,EAASC,GAAT,EAAcV,OAAd,EAAuBe,GAAvB,EAA4BC,IAA5B,CAApB;EACD,KAND;EAOD;;EAED,WAASQ,IAAT,GAAgB;EACdlB,IAAAA,cAAc,CAAC,SAAD,CAAd;EACAA,IAAAA,cAAc,CAAC,MAAD,CAAd;EACAA,IAAAA,cAAc,CAAC,SAAD,CAAd;EACAA,IAAAA,cAAc,CAAC,QAAD,CAAd;;EAEA,QAAIJ,KAAJ,EAAW;EACTgB,MAAAA,UAAU;EACX;EACF;;EAEDM,EAAAA,IAAI;EACL,CAzED;;;;"}